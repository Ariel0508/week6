import{h as d,g as P,f as C,o as I,a,c as i,e as t,n as V,t as r,u as c,l as x,v as T,k as $,d as q}from"./index-AwOZ9YS5.js";import{a as E}from"./axios-G2rPRu76.js";import{u as A}from"./cartStore-WMkw82hu.js";var R={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const D={id:"app"},S={class:"container"},U={class:"row m-3"},B={class:"table"},M=t("thead",null,[t("tr",null,[t("th",{width:"150"},"圖片"),t("th",{width:"150"},"產品名稱"),t("th",{width:"120"},"價格"),t("th",{width:"150"})])],-1),L={width:"200"},N={width:"150"},z={width:"120"},H={key:0},O={key:1},Q={class:"text-danger"},j={width:"120"},F={class:"input-group"},G=["disabled"],J=["disabled"],K={width:"200"},W=["disable"],X={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},Y={colspan:"5",class:"border-0 text-end"},nt={__name:"ProductView",setup(Z){const{VITE_APP_URL:v,VITE_APP_PATH:_}=R,p=A(),{getCart:b,addToCart:h,removeCartItem:m}=p,n=d({}),u=d({loadingItem:""}),e=d({}),y=P(),g=C(),k=d(y.params),w=()=>{E.get(`${v}/api/${_}/product/${k.value.id}`).then(l=>{n.value=l.data.product})},f=()=>{g.push("/cart")};return I(()=>{w(),b()}),(l,o)=>(a(),i("div",D,[t("div",S,[t("div",U,[t("table",B,[M,t("tbody",null,[t("tr",null,[t("td",L,[t("div",{style:V([{height:"250px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${n.value.imageUrl})`}])},null,4)]),t("td",N,r(n.value.title),1),t("td",z,[n.value.price===n.value.origin_price?(a(),i("div",H,r(n.value.origin_price)+"元 ",1)):(a(),i("div",O,[t("del",null,"原價"+r(n.value.origin_price)+"元",1),t("div",Q,"現在只要"+r(n.value.price)+"元",1)]))]),t("td",j,[t("div",F,[e.value.qty>1?(a(),i("button",{key:0,type:"button",class:"btn btn-outline-secondary",disabled:e.value.qty===1,onClick:o[0]||(o[0]=s=>{e.value.qty--,l.changeCartQty(e.value,e.value.qty)})}," - ",8,G)):(a(),i("button",{key:1,type:"button",class:"btn btn-outline-danger",onClick:o[1]||(o[1]=s=>c(m)(e.value.id))}," - ")),x(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.qty=s),type:"number",min:"0",max:"20",class:"form-control text-center","aria-label":"Dollar amount (with dot and two decimal places)",readonly:"",disabled:e.value.productId===u.value.loadingItem},null,8,J),[[T,e.value.qty]]),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:o[3]||(o[3]=s=>{e.value.qty++,l.changeCartQty(e.value,e.value.qty)})}," + ")])]),t("td",K,[t("button",{type:"button",class:"btn btn-outline-danger",disable:n.value.id===u.value.loadingItem,onClick:o[4]||(o[4]=s=>c(h)(n.value.id))},[n.value.id===u.value.loadingItem?(a(),i("span",X)):$("",!0),q(" 加入購物車 ")],8,W)])])]),t("tfoot",null,[t("tr",null,[t("td",Y,[t("button",{type:"button",class:"btn btn-primary",onClick:o[5]||(o[5]=s=>f())}," 購物車 ")])])])])])])]))}};export{nt as default};

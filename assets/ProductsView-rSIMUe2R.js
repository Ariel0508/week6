import{a as m}from"./axios-G2rPRu76.js";import{_ as w,u as I,e as x,f as r,g as T,o as s,c as n,a as t,F as V,h as C,n as E,t as c,i as A,d as R}from"./index-QFATr8mL.js";var v={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:b}=v,{VITE_APP_PATH:g}=v,$={setup(){const u=I(),a=x(),h=r(a.params.productId),o=r([]),p=r({}),i=r({loadingItem:""}),e=()=>{const d=`${b}/api/${g}/products/all`;m.get(d).then(_=>{o.value=_.data.products})},l=(d,_=1)=>{i.value.loadingItem=d;const f={product_id:d,qty:_},y=`${b}/api/${g}/cart`;m.post(y,{data:f}).then(P=>{i.value.loadingItem="",alert(P.data.message)})},k=()=>{u.push("/cart")};return T(()=>{e()}),{id:h,products:o,tempProduct:p,status:i,getProducts:e,addToCart:l,openModal:k}},components:{}},M={id:"app"},S={class:"container"},B={class:"row m-3"},D={class:"table"},L=t("thead",null,[t("tr",null,[t("th",{width:"150"},"圖片"),t("th",{width:"150"},"產品名稱"),t("th",{width:"120"},"價格"),t("th",{width:"150"})])],-1),U={width:"200"},N={width:"150"},z={width:"120"},F={key:0},H={key:1},O={class:"text-danger"},j={width:"200"},q=["onClick"],G=["disable","onClick"],J={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},K={colspan:"5",class:"border-0 text-end"};function Q(u,a,h,o,p,i){return s(),n("div",M,[t("div",S,[t("div",B,[t("table",D,[L,t("tbody",null,[(s(!0),n(V,null,C(o.products,e=>(s(),n("tr",{key:e.id},[t("td",U,[t("div",{style:E([{height:"250px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",N,c(e.title),1),t("td",z,[e.price===e.origin_price?(s(),n("div",F,c(e.origin_price)+"元 ",1)):(s(),n("div",H,[t("del",null,"原價"+c(e.origin_price)+"元",1),t("div",O,"現在只要"+c(e.price)+"元",1)]))]),t("td",j,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:l=>o.openModal(e)}," 查看更多 ",8,q),t("button",{type:"button",class:"btn btn-outline-danger",disable:e.id===o.status.loadingItem,onClick:l=>o.addToCart(e.id,1)},[e.id===o.status.loadingItem?(s(),n("span",J)):A("",!0),R(" 加入購物車 ")],8,G)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",K,[t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=e=>o.openModal())}," 購物車 ")])])])])])])])}const Y=w($,[["render",Q]]);export{Y as default};

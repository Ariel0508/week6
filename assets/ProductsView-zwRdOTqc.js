import{a as C}from"./axios-G2rPRu76.js";import{_ as T,f as V,g as I,h as i,i as R,o as E,r as A,a as s,c as n,e as t,b as m,w as b,F as y,j as f,d as c,t as r,n as $,k as L}from"./index-AwOZ9YS5.js";import{u as S}from"./cartStore-WMkw82hu.js";var B={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"rubby-api",BASE_URL:"/week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:D,VITE_APP_PATH:M}=B,N={setup(){const g=S(),{addToCart:d}=g,l=V(),e=I(),k=i(e.params.productId),_=i([]),a=i({}),o=i({loadingItem:""}),u=i(["太陽眼鏡","逗貓玩具","項圈","貓跳台","貓抓板"]),h=()=>{const{category:p=""}=e.query,w=`${D}/api/${M}/products?category=${p}`;C.get(w).then(P=>{_.value=P.data.products})},v=p=>{l.push(`/product/${p.id}`)},x=()=>{l.push("/cart")};return R(()=>e.query,()=>{h()}),E(()=>{h()}),{id:k,products:_,categories:u,tempProduct:a,status:o,getProducts:h,addToCart:d,openModal:v,goToCart:x}},components:{}},U={id:"app"},q={class:"container"},z={class:"row m-3"},F={class:"col-md-2 fs-6 mt-5 list-unstyled"},H={class:"col-md-10"},O={class:"table"},j=t("thead",null,[t("tr",null,[t("th",{width:"150"},"圖片"),t("th",{width:"150"},"產品名稱"),t("th",{width:"120"},"價格"),t("th",{width:"150"})])],-1),G={width:"200"},J={width:"150",class:"fs-5"},K={width:"120"},Q={key:0},W={key:1},X={class:"text-danger"},Y={width:"200"},Z=["onClick"],tt=["disable","onClick"],ot={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},et={colspan:"5",class:"border-0 text-end"};function st(g,d,l,e,k,_){const a=A("RouterLink");return s(),n("div",U,[t("div",q,[t("div",z,[t("ul",F,[t("li",null,[m(a,{class:"m-4 text-decoration-none text-dark",to:"/products"},{default:b(()=>[c(" 全部")]),_:1})]),(s(!0),n(y,null,f(e.categories,o=>(s(),n("li",{key:o},[m(a,{class:"m-4 text-decoration-none text-dark",to:`/products?category=${o}`},{default:b(()=>[c(r(o),1)]),_:2},1032,["to"])]))),128))]),t("div",H,[t("table",O,[j,t("tbody",null,[(s(!0),n(y,null,f(e.products,o=>(s(),n("tr",{key:o.id},[t("td",G,[t("div",{style:$([{height:"250px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.imageUrl})`}])},null,4)]),t("td",J,[m(a,{class:"text-decoration-none",to:`/product/${o.id}`},{default:b(()=>[c(r(o.title),1)]),_:2},1032,["to"])]),t("td",K,[o.price===o.origin_price?(s(),n("div",Q,r(o.origin_price)+"元 ",1)):(s(),n("div",W,[t("del",null,"原價"+r(o.origin_price)+"元",1),t("div",X,"現在只要"+r(o.price)+"元",1)]))]),t("td",Y,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:u=>e.openModal(o)}," 查看更多 ",8,Z),t("button",{type:"button",class:"btn btn-outline-danger",disable:o.id===e.status.loadingItem,onClick:u=>e.addToCart(o.id,1)},[o.id===e.status.loadingItem?(s(),n("span",ot)):L("",!0),c(" 加入購物車 ")],8,tt)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",et,[t("button",{type:"button",class:"btn btn-primary",onClick:d[0]||(d[0]=o=>e.goToCart())}," 購物車 ")])])])])])])])])}const rt=T(N,[["render",st]]);export{rt as default};
